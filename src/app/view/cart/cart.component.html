<div id="shop">
  <header>
    <div class="search_b">
      <i class="fas fa-times search_icon"></i>
      <input type="search" placeholder="Seacrh" />
    </div>
    <div class="container flex_center">
      <div class="title">
        <h1>Cart</h1>
        <p>
          Lorem ipsum dolor, sit amet consectetur adipisicing elit.
          Necessitatibus at suscipit enim expedita natus eligendi architecto
          rerum asperiores.
        </p>
      </div>
    </div>
  </header>
  <div class="container content">
    <section class="service_b">
      <div class="container">
        <div class="row">
          <table id="cart">
            <tr>
              <th></th>
              <th id="item">Item</th>
              <th id="price">Price</th>
              <th id="discount">Discount</th>
              <th id="quantity">Quantity</th>
              <th></th>
              <th></th>
              <th>Total Price</th>
              <th></th>
            </tr>
            <tr *ngFor="let cItem of cartItems">
              <td>
                <img
                  src="{{ cItem.item.imagePath }}"
                  style="height: 4rem; width: 4rem"
                />
              </td>
              <td>{{ cItem.item.name }}</td>
              <td>{{ cItem.item.price }}</td>
              <td></td>
              <td>{{ cItem.count }}</td>
              <td>
                <a (click)="incrementItem(cItem.item)"
                  ><i class="fas fa-plus"></i
                ></a>
              </td>
              <td>
                <a (click)="decrementItem(cItem.item.id)"
                  ><i class="fas fa-minus"></i
                ></a>
              </td>
              <td>{{ cItem.count * cItem.item.price | currency: "LKR " }}</td>
              <td>
                <button
                  class="button_line remove-btn"
                  (click)="removeItem(cItem.item.id)"
                >
                  Remove
                </button>
              </td>
            </tr>
            <tr>
              <td>Total Quantity/Price</td>
              <td></td>
              <td></td>
              <td></td>
              <td>{{ totQuantity }}</td>
              <td></td>
              <td></td>
              <td>{{ totPrice | currency: "LKR " }}</td>
              <td>
                <button
                  *ngIf="cartItems.length > 0"
                  class="button_line remove-btn"
                  (click)="removeAllItems()"
                >
                  Clear All
                </button>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <br /><br />
      <!--&& this.isLoggedIn-->

      <a
        *ngIf="cartItems.length > 0 && isLoggedIn"
        class="button_line"
        [routerLink]="['/order/payment']"
      >
        Checkout
      </a>
      <a
        *ngIf="cartItems.length > 0 && !isLoggedIn"
        class="button_line"
        (onclick)="isAlert = true"
      >
        Checkout
      </a>

      <!-- <a
        *ngIf="cartItems.length > 0 && !this.isLoggedIn"
        class="button_line"
        [routerLink]="['/login']"
        onclick="alert('Please Login to Continue')"
      >
        Checkout
      </a> -->
      <a
        *ngIf="cartItems.length == 0 && !isLoggedIn"
        class="button_line"
        aria-disabled="true"
      >
        Checkout
      </a>
      <a
        *ngIf="cartItems.length == 0 && isLoggedIn"
        class="button_line"
        aria-disabled="true"
      >
        Checkout
      </a>
      <alert type="danger" **ngIf="isAlert">
        <strong>Oh snap!</strong> Please Add the Items to the Cart !!!!
      </alert>
    </section>
  </div>
</div>
